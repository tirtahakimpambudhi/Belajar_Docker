events { worker_connections 1024; }
http {

    upstream round_robin {
        server server_one:8081 weight=6;   
        server server_two:8081 weight=4; 
        # backup untuk jika semua server di grup down semua backup akan berfungsi
        # down untuk menandai server sedang down atau tidak berjalan
    }

    upstream least_connection {
        least_conn;
        server server_one:8081;   
        server server_two:8081;         
    }

    upstream ip_hashing {
        ip_hash;
        server server_one:8081;   
        server server_two:8081;         
    }

    upstream generic_hashing {
        hash $request_uri consistent;
        server server_one:8081;   
        server server_two:8081;
    }
# NGINX Plus Supported
    # upstream least_timer {
    #     least_time header;
    #     server server_two:8081;  
    #     server server_two:8081;
    # }

    # upstream random_round {
    #     random two least_time=last_byte;
    #     server server_two:8081;  
    #     server server_two:8081;
    # }
    server {
        listen 80;
        location / {
            proxy_pass http://round_robin/;
        }
    }
}